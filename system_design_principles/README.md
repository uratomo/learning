現場で役立つシステム設計の原則

# 1 章 小さくまとめてわかりやすくする

- 命名はわかりやすくする
- ロジックは、必要に応じてメソッドに小分けする
- データ型の範囲を限定させる（int,Bigdecimal）
- 値を扱うクラスを作る(currency,Days,url)<=　値を加工したりすること

# 2 章　場合分けのロジックを整理する

- 早期 return
- 区分ごとのロジックを別クラスに分ける(STI)
  - ex) 料金
    - class AdultFee
    - class ChildFee
    - class SeniorFee
- 状態遷移を考える

# 3 章 業務ロジックをわかりやすく整理する

- 昔は、手続き型の設計だったが、今は、オブジェクト指向となっている
  - 手続き型の特徴
    - 関心事が、三層アーキテクチャで分離されている。
      - 三層の詳細
      - プレゼンテーション層
      - アプリケーション層
      - データソース層
  - 手続き型のデメリット
    - データクラスと機能クラスが分けられているので、変更が容易でない

### まとめ

- データと　判断/加工/計算のロジックは一体化させる。 (この書籍では、それをドメインオブジェクト/ドメインモデルと読んでいる)

  - ドメインモデルは、プレゼンテーション層や、データソース層の都合から独立させる

# 4 章 ドメインモデルの考え方で設計する

- Rails でいう model をベースに設計は行われる。
- データテーブル中心の設計ではなく、class に主眼を置いて設計をする
- ドメインモデルの設計の仕方
  - 手続き型のアプローチだと...
    - 全体を俯瞰し、段階的に粒度を細かくしていくトップダウン
  - オブジェクト指向のアプローチだと...
    - 部分に注目して設計、都度全体を俯瞰し詳細を詰めていくボトムアップ
    - 全体と、部分を振り返る具体的な方法
      - パッケージ図
      - 業務フロー図
- ドメインオブジェクトの見つけ方
